{% extends "base/center_card.html" %}
{% load static widget_tweaks %}

{% block title %}Reset Password{% endblock %}

{% block card_header_content %}
  {% if validlink %}
    <h3>Password Reset</h3>
  {% else %}
    <h3>Invalid Reset Link</h3>
  {% endif %}
{% endblock %}

{% block card_body_content %}
  {% if validlink %}

    {% if form.errors %}
      {% for field in form %}
        {% for error in field.errors %}
          <div class="alert alert-danger">
            <strong class="submission-error">{{ error|escape }}</strong>
          </div>
        {% endfor %}
      {% endfor %}
    {% endif %}

    <form method="post" novalidate>
      {% csrf_token %}
      <div class="my-4">
        <label class="form-label">New Password</label>
        {% render_field form.new_password1 class="form-control" placeholder="New Password" %}
      </div>
      <div class="my-4">
        <label class="form-label">Confirm New Password</label>
        {% render_field form.new_password2 class="form-control" placeholder="Confirm New Password" %}
      </div>
      <button id="id_submit_btn" type="submit" class="btn btn-lg btn-primary">Save</button>
    </form>

  {% else %}

    <p>
      The link you have used is either expired or no longer valid.
      <a id="id_try_again" href="{% url 'auth:password-reset' %}">Request new reset link</a>.
    </p>

  {% endif %}
{% endblock %}