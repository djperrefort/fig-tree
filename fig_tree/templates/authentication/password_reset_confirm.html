{% extends "base/center_card.html" %}
{% load static widget_tweaks %}

{% block title %}Reset Password{% endblock %}

{% if validlink %}
  {% block card_header_content %}
    <div class="text-center mb-4">
      <a href="{% url 'home' %}" class="navbar-brand"><img src="{% static 'logos/svg/logo-no-background.svg' %}" alt="Fig-Tree" height="36"></a>
    </div>
  {% endblock %}
{% endif %}

{% block card_body_content %}
  {% if validlink %}
    <h2 class="card-title text-center mb-4">Something Went Wrong</h2>
    {% if form.errors %}
      {% for field in form %}
        {% for error in field.errors %}
          <div class="alert alert-danger">
            <strong class="submission-error">{{ error|escape }}</strong>
          </div>
        {% endfor %}
      {% endfor %}
    {% endif %}
    <form method="post" novalidate>
      {% csrf_token %}
      <div class="my-4">
        <label class="form-label">New Password</label>
        {% render_field form.new_password1 class="form-control" placeholder="New Password" %}
      </div>
      <div class="my-4">
        <label class="form-label">Confirm New Password</label>
        {% render_field form.new_password2 class="form-control" placeholder="Confirm New Password" %}
      </div>
      <button id="id_submit_btn" type="submit" class="btn btn-lg btn-primary">Save</button>
    </form>
  {% else %}
    <h2 class="text-center mb-4">Something Went Wrong</h2>
    <p class="card-text">The link you have used is either expired or no longer valid.</p>
    <p class="card-text text-center">
      <a id="id_try_again" href="{% url 'auth:password-reset' %}">Click here to get a new one</a>
    </p>
  {% endif %}
{% endblock %}